### 数据链路层、物理层

------

[TOC]

##### 01：LAN 三要素

1. 网络的拓扑结构
   - 总线型
   - 环型网
   - 星型网
2. 传输介质
   - 有线：双绞线、同轴电缆、光纤
   - 无线：红外线、无线电、电磁波
3. 介质访问控制方式
   - 随机接入
   - 令牌方式

##### 02：局域网的参考模型

- OSI最底两层
  - 数据链路层
    - LLC：逻辑链路子层
    - MAC：介质访问地址
  - 物理层

##### 03：以太网

​	采用无连接的方式，并且对数据不进行编号的局域网

###### 以太网的标准表示

- <以 Mb/s  的传输速率> <信号调制方式> <以百米为单位的单段最大长度或传输介质>
  - 10 Base 2、10 Base-T

###### 共享式以太网

​	采用总线式的网络结构，传输信号，使用**CSMA/CD介质访问控制方式**的半双工通信的以太网

- CSMA/CD：带有冲突检测的载波侦听多点访问协议；
  - 侦听总线：先听后发
  - 冲突检测：边听边发
  - 冲突停止
  - 随机延迟后重发

##### 04：物理层

​	物理层又细分为：

1. PCS：物理编码子层，负责 mac 子层数据的编码和解码
2. PMA：物理介质连接，负责与上层的串行服务接口
3. PMD：物理介质相关，负责信号的发送和接受
4. MDI：介质相关接口，对于不同的物理介质提供接口

##### 05：数据链路层

###### LLC

- 逻辑链路控制是局域网中数据链路层的上层部分，用户的数据链路服务通过LLC子层**为网络层提供统一的接口**


###### MAC 子层

1. MAC地址(物理地址)：用于**局域网中对设备的识别**和区分使用MAC地址，每张网卡都具有独一无二的物理地址；
   -  格式：6 个字节，用12 个十六进制表示，用":" 分隔
   - ether：38:f9:d3:6f:1d:14，前4个字节为厂商代码，后2两个字节自行分配
2. 硬件地址类型
   1. 单播类型：一对一
   2. 多播类型：一对多
   3. 广播类型：一对全体

###### 局域网通信

- 在局域网中的通信是**通过数据链路层进行的，通信通常不需要经过网络层**，因为设备位于同一个网络内部。在操作系统的网络协议栈中，**数据链路层的数据将被传递到网络层以上的层级，最终到达应用层供应用程序处理和解释**。
- 当设备在局域网中通信时，它们需要**使用MAC地址来直接定位和识别对方**，而不需要路由器或者其他网络设备的帮。

##### 06：MAC 帧结构

- 目的地址【6】源地址【6】长度/类型【2】数据【46-1500】FCS【4】
- FCS：帧校验序列
- 类型：用于指明数据字段是什么协议类型
- MAC帧结构大小：46-1518 字节

###### 同步数据

- PRE：前导码，7个字节，均为10101010(bit)，用于唤醒接受的适配器，**引导接受和发送数据建立同步**
- SFD：帧开始定界符，1个字节：10101011

<img src="https://github.com/likang315/Network/blob/master/01：计算机网络/photos/mac-frame.png?raw=true" style="zoom:67%;" />

##### 07：Hub集线器

- 工作在局域网中，星型拓扑结构，其介入控制方式采用 CSMA/CD。通过**物理层的方式（物理层设备）**将连接到它的所有设备串联在一起，接收到的数据会被发送到（广播）所有其他连接的设备上；
- 多端口的转发器，当信号从集线器某端口传入时，集线器直接将此信号**在其他所有的端口上转发**；
  - 若有两个端口同时传入信号时，即产生冲突；
- 交换机已经取代了集线器，不具有交换机的“智能记忆”能力和“学习”能力、MAC地址表，所以它发送数据时都是**没有针对性的，而是采用广播方式发送给集线器的所有连接点**。

##### 08：交换机（Switch）

- 用于在**局域网（LAN）中连接多台计算机并转发数据包**。它能够根据数据包中的目标地址（通常是MAC地址）来直接将数据包从一个端口转发到另一个端口，从而在**网络中实现点对点通信**，提高网络效率并减少冲突。
- MAC 地址表
  - 交换机转发依据 MAC 地址表数据表，表中**记录了站点 MAC 地址和其对应的端口**，以及该表项的生命周期；
  - OSI 模型中的第二层设备；

- 功能：
  - 学习，泛洪，过滤/转发，老化；
  - 当交换机接收到一个数据包且目标地址不在其地址表中时，会**将数据包从除接收端口外的所有端口进行泛洪**（广播）。同时，交换机会学习这个目标地址，将其与接收到的端口关联起来，以便以后能够直接转发数据包而不必进行泛洪。
- 交换机的广播域、冲突域；
- 交换机通过级联的方式进行组网；

###### 三层交换机（Layer 3 Switch）

- 结合了交换机和路由器功能的网络设备，**既可以像交换机一样快速转发数据包，又可以像路由器一样进行IP数据包的路由转发**，因此它具备二层和三层转发的能力。

###### 生成树协议

- 是一种网络协议，用于在以太网网络中**防止出现环路**，并确保数据包在网络中按照唯一的路径进行传输。

###### LAN、VLAN（虚拟局域网）

- 允许一个物理 VLAN 上，定义多个**虚拟的、逻辑上的LAN**；
- VLAN帧：标准帧格式中插入一个4个字节的标识符，标记那个 VLAN；
- 隔离了广播域，增加了安全性；

##### 09：交换机和路由器的区别

1. 路由器在网络层，第三层设备，路由器根据**IP地址寻址**，交换机在数据链路层，第二层设备，交换机根据**MAC地址寻址**；
2. 交换机做**端口扩展的**，就是扩大局域网的接入点； 路由器是用来做**网间连接**，也就是用来连接不同的网络；
   - 示例：邮局（路由器），快递员（交换机）；

